package com.example.oncampusapp;

import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;
import android.widget.Toast;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

/**
 * Helper class for Concordia Shuttle Service functionality
 * Handles shuttle-specific constants, routing, timetable access, and map markers
 */
public class ShuttleHelper {

    // Concordia Shuttle Stop Locations
    public static final LatLng SHUTTLE_STOP_SGW = new LatLng(45.497163, -73.578535); // SGW Campus
    public static final LatLng SHUTTLE_STOP_LOY = new LatLng(45.458424, -73.638369); // Loyola Campus

    /** Estimated shuttle journey duration (one way) */
    public static final String SHUTTLE_DURATION_EST = "~30 MIN";

    /**
     * Full SGW → Loyola shuttle route extracted from official KML track.
     * Coordinates are in LatLng(latitude, longitude) order.
     */
    private static final List<LatLng> SHUTTLE_ROUTE_SGW_TO_LOY = Collections.unmodifiableList(Arrays.asList(
            new LatLng(45.49719, -73.57831),
            new LatLng(45.49668, -73.57876),
            new LatLng(45.49656, -73.57887),
            new LatLng(45.49652, -73.57890),
            new LatLng(45.49645, -73.57897),
            new LatLng(45.49634, -73.57908),
            new LatLng(45.49629, -73.57912),
            new LatLng(45.49627, -73.57914),
            new LatLng(45.49626, -73.57915),
            new LatLng(45.49624, -73.57917),
            new LatLng(45.49622, -73.57918),
            new LatLng(45.49619, -73.57919),
            new LatLng(45.49616, -73.57921),
            new LatLng(45.49614, -73.57923),
            new LatLng(45.49611, -73.57924),
            new LatLng(45.49608, -73.57925),
            new LatLng(45.49606, -73.57926),
            new LatLng(45.49604, -73.57926),
            new LatLng(45.49600, -73.57927),
            new LatLng(45.49596, -73.57928),
            new LatLng(45.49587, -73.57930),
            new LatLng(45.49581, -73.57931),
            new LatLng(45.49573, -73.57932),
            new LatLng(45.49569, -73.57926),
            new LatLng(45.49562, -73.57935),
            new LatLng(45.49555, -73.57943),
            new LatLng(45.49550, -73.57949),
            new LatLng(45.49548, -73.57951),
            new LatLng(45.49538, -73.57962),
            new LatLng(45.49519, -73.57986),
            new LatLng(45.49484, -73.58026),
            new LatLng(45.49457, -73.58058),
            new LatLng(45.49453, -73.58050),
            new LatLng(45.49425, -73.58002),
            new LatLng(45.49412, -73.57977),
            new LatLng(45.49406, -73.57966),
            new LatLng(45.49382, -73.57928),
            new LatLng(45.49330, -73.57841),
            new LatLng(45.49293, -73.57770),
            new LatLng(45.49259, -73.57711),
            new LatLng(45.49238, -73.57675),
            new LatLng(45.49230, -73.57661),
            new LatLng(45.49167, -73.57721),
            new LatLng(45.49159, -73.57728),
            new LatLng(45.49153, -73.57733),
            new LatLng(45.49142, -73.57743),
            new LatLng(45.49133, -73.57752),
            new LatLng(45.49124, -73.57761),
            new LatLng(45.49106, -73.57778),
            new LatLng(45.49099, -73.57785),
            new LatLng(45.49086, -73.57798),
            new LatLng(45.49066, -73.57819),
            new LatLng(45.49057, -73.57829),
            new LatLng(45.49052, -73.57835),
            new LatLng(45.49050, -73.57837),
            new LatLng(45.49044, -73.57844),
            new LatLng(45.49038, -73.57852),
            new LatLng(45.49036, -73.57854),
            new LatLng(45.49024, -73.57870),
            new LatLng(45.49016, -73.57858),
            new LatLng(45.49002, -73.57832),
            new LatLng(45.48997, -73.57825),
            new LatLng(45.48993, -73.57819),
            new LatLng(45.48989, -73.57814),
            new LatLng(45.48982, -73.57808),
            new LatLng(45.48971, -73.57799),
            new LatLng(45.48965, -73.57795),
            new LatLng(45.48957, -73.57792),
            new LatLng(45.48950, -73.57790),
            new LatLng(45.48943, -73.57789),
            new LatLng(45.48937, -73.57789),
            new LatLng(45.48936, -73.57789),
            new LatLng(45.48928, -73.57790),
            new LatLng(45.48919, -73.57793),
            new LatLng(45.48905, -73.57799),
            new LatLng(45.48903, -73.57801),
            new LatLng(45.48896, -73.57805),
            new LatLng(45.48886, -73.57816),
            new LatLng(45.48875, -73.57830),
            new LatLng(45.48862, -73.57847),
            new LatLng(45.48846, -73.57870),
            new LatLng(45.48811, -73.57918),
            new LatLng(45.48797, -73.57938),
            new LatLng(45.48781, -73.57960),
            new LatLng(45.48751, -73.58003),
            new LatLng(45.48713, -73.58058),
            new LatLng(45.48683, -73.58102),
            new LatLng(45.48675, -73.58113),
            new LatLng(45.48664, -73.58128),
            new LatLng(45.48662, -73.58132),
            new LatLng(45.48661, -73.58134),
            new LatLng(45.48654, -73.58143),
            new LatLng(45.48648, -73.58152),
            new LatLng(45.48629, -73.58180),
            new LatLng(45.48624, -73.58188),
            new LatLng(45.48623, -73.58188),
            new LatLng(45.48591, -73.58237),
            new LatLng(45.48579, -73.58255),
            new LatLng(45.48550, -73.58299),
            new LatLng(45.48522, -73.58342),
            new LatLng(45.48521, -73.58342),
            new LatLng(45.48520, -73.58342),
            new LatLng(45.48512, -73.58343),
            new LatLng(45.48487, -73.58378),
            new LatLng(45.48472, -73.58403),
            new LatLng(45.48458, -73.58426),
            new LatLng(45.48457, -73.58428),
            new LatLng(45.48444, -73.58450),
            new LatLng(45.48431, -73.58473),
            new LatLng(45.48408, -73.58510),
            new LatLng(45.48392, -73.58535),
            new LatLng(45.48371, -73.58569),
            new LatLng(45.48365, -73.58578),
            new LatLng(45.48350, -73.58603),
            new LatLng(45.48334, -73.58629),
            new LatLng(45.48323, -73.58646),
            new LatLng(45.48312, -73.58663),
            new LatLng(45.48300, -73.58681),
            new LatLng(45.48279, -73.58715),
            new LatLng(45.48240, -73.58777),
            new LatLng(45.48239, -73.58779),
            new LatLng(45.48236, -73.58784),
            new LatLng(45.48193, -73.58854),
            new LatLng(45.48181, -73.58873),
            new LatLng(45.48109, -73.58988),
            new LatLng(45.48067, -73.59057),
            new LatLng(45.48046, -73.59092),
            new LatLng(45.47973, -73.59210),
            new LatLng(45.47955, -73.59238),
            new LatLng(45.47938, -73.59263),
            new LatLng(45.47938, -73.59272),
            new LatLng(45.47937, -73.59273),
            new LatLng(45.47937, -73.59274),
            new LatLng(45.47915, -73.59308),
            new LatLng(45.47907, -73.59320),
            new LatLng(45.47891, -73.59342),
            new LatLng(45.47880, -73.59355),
            new LatLng(45.47867, -73.59371),
            new LatLng(45.47849, -73.59393),
            new LatLng(45.47844, -73.59398),
            new LatLng(45.47838, -73.59405),
            new LatLng(45.47822, -73.59420),
            new LatLng(45.47808, -73.59434),
            new LatLng(45.47795, -73.59446),
            new LatLng(45.47788, -73.59453),
            new LatLng(45.47767, -73.59470),
            new LatLng(45.47748, -73.59484),
            new LatLng(45.47742, -73.59488),
            new LatLng(45.47736, -73.59493),
            new LatLng(45.47733, -73.59495),
            new LatLng(45.47716, -73.59506),
            new LatLng(45.47700, -73.59516),
            new LatLng(45.47692, -73.59522),
            new LatLng(45.47690, -73.59522),
            new LatLng(45.47667, -73.59536),
            new LatLng(45.47661, -73.59539),
            new LatLng(45.47655, -73.59542),
            new LatLng(45.47644, -73.59547),
            new LatLng(45.47633, -73.59552),
            new LatLng(45.47624, -73.59557),
            new LatLng(45.47609, -73.59563),
            new LatLng(45.47592, -73.59571),
            new LatLng(45.47574, -73.59579),
            new LatLng(45.47556, -73.59587),
            new LatLng(45.47552, -73.59592),
            new LatLng(45.47536, -73.59600),
            new LatLng(45.47526, -73.59606),
            new LatLng(45.47517, -73.59612),
            new LatLng(45.47507, -73.59620),
            new LatLng(45.47500, -73.59630),
            new LatLng(45.47491, -73.59644),
            new LatLng(45.47490, -73.59646),
            new LatLng(45.47490, -73.59647),
            new LatLng(45.47482, -73.59657),
            new LatLng(45.47476, -73.59665),
            new LatLng(45.47475, -73.59666),
            new LatLng(45.47468, -73.59672),
            new LatLng(45.47468, -73.59673),
            new LatLng(45.47467, -73.59674),
            new LatLng(45.47460, -73.59681),
            new LatLng(45.47450, -73.59692),
            new LatLng(45.47430, -73.59710),
            new LatLng(45.47428, -73.59712),
            new LatLng(45.47420, -73.59718),
            new LatLng(45.47418, -73.59720),
            new LatLng(45.47408, -73.59730),
            new LatLng(45.47399, -73.59738),
            new LatLng(45.47386, -73.59756),
            new LatLng(45.47381, -73.59763),
            new LatLng(45.47370, -73.59778),
            new LatLng(45.47368, -73.59781),
            new LatLng(45.47366, -73.59785),
            new LatLng(45.47358, -73.59799),
            new LatLng(45.47357, -73.59801),
            new LatLng(45.47356, -73.59803),
            new LatLng(45.47352, -73.59809),
            new LatLng(45.47346, -73.59821),
            new LatLng(45.47341, -73.59830),
            new LatLng(45.47335, -73.59842),
            new LatLng(45.47333, -73.59845),
            new LatLng(45.47330, -73.59851),
            new LatLng(45.47326, -73.59857),
            new LatLng(45.47323, -73.59861),
            new LatLng(45.47322, -73.59862),
            new LatLng(45.47300, -73.59891),
            new LatLng(45.47286, -73.59908),
            new LatLng(45.47270, -73.59930),
            new LatLng(45.47262, -73.59940),
            new LatLng(45.47257, -73.59947),
            new LatLng(45.47256, -73.59948),
            new LatLng(45.47254, -73.59948),
            new LatLng(45.47249, -73.59950),
            new LatLng(45.47221, -73.59988),
            new LatLng(45.47167, -73.60061),
            new LatLng(45.47155, -73.60077),
            new LatLng(45.47155, -73.60078),
            new LatLng(45.47129, -73.60114),
            new LatLng(45.47114, -73.60135),
            new LatLng(45.47103, -73.60150),
            new LatLng(45.47087, -73.60168),
            new LatLng(45.47074, -73.60184),
            new LatLng(45.47069, -73.60190),
            new LatLng(45.47057, -73.60208),
            new LatLng(45.47045, -73.60226),
            new LatLng(45.47041, -73.60231),
            new LatLng(45.47037, -73.60237),
            new LatLng(45.47020, -73.60258),
            new LatLng(45.47018, -73.60260),
            new LatLng(45.47005, -73.60278),
            new LatLng(45.46997, -73.60290),
            new LatLng(45.46992, -73.60296),
            new LatLng(45.46984, -73.60307),
            new LatLng(45.46979, -73.60313),
            new LatLng(45.46971, -73.60324),
            new LatLng(45.46958, -73.60342),
            new LatLng(45.46957, -73.60344),
            new LatLng(45.46954, -73.60347),
            new LatLng(45.46950, -73.60359),
            new LatLng(45.46948, -73.60362),
            new LatLng(45.46925, -73.60422),
            new LatLng(45.46914, -73.60452),
            new LatLng(45.46904, -73.60466),
            new LatLng(45.46888, -73.60498),
            new LatLng(45.46879, -73.60517),
            new LatLng(45.46875, -73.60525),
            new LatLng(45.46869, -73.60535),
            new LatLng(45.46856, -73.60555),
            new LatLng(45.46845, -73.60570),
            new LatLng(45.46840, -73.60577),
            new LatLng(45.46809, -73.60621),
            new LatLng(45.46768, -73.60677),
            new LatLng(45.46757, -73.60695),
            new LatLng(45.46751, -73.60707),
            new LatLng(45.46745, -73.60719),
            new LatLng(45.46739, -73.60731),
            new LatLng(45.46735, -73.60743),
            new LatLng(45.46731, -73.60754),
            new LatLng(45.46727, -73.60772),
            new LatLng(45.46693, -73.60886),
            new LatLng(45.46682, -73.60927),
            new LatLng(45.46678, -73.60941),
            new LatLng(45.46673, -73.60957),
            new LatLng(45.46671, -73.60966),
            new LatLng(45.46663, -73.60991),
            new LatLng(45.46660, -73.60998),
            new LatLng(45.46656, -73.61008),
            new LatLng(45.46646, -73.61027),
            new LatLng(45.46638, -73.61043),
            new LatLng(45.46636, -73.61047),
            new LatLng(45.46630, -73.61057),
            new LatLng(45.46622, -73.61075),
            new LatLng(45.46585, -73.61145),
            new LatLng(45.46582, -73.61166),
            new LatLng(45.46568, -73.61197),
            new LatLng(45.46559, -73.61224),
            new LatLng(45.46558, -73.61229),
            new LatLng(45.46555, -73.61242),
            new LatLng(45.46555, -73.61252),
            new LatLng(45.46555, -73.61263),
            new LatLng(45.46555, -73.61276),
            new LatLng(45.46557, -73.61306),
            new LatLng(45.46559, -73.61314),
            new LatLng(45.46559, -73.61323),
            new LatLng(45.46560, -73.61332),
            new LatLng(45.46560, -73.61342),
            new LatLng(45.46560, -73.61352),
            new LatLng(45.46560, -73.61356),
            new LatLng(45.46559, -73.61363),
            new LatLng(45.46559, -73.61371),
            new LatLng(45.46557, -73.61380),
            new LatLng(45.46557, -73.61381),
            new LatLng(45.46555, -73.61389),
            new LatLng(45.46551, -73.61398),
            new LatLng(45.46546, -73.61407),
            new LatLng(45.46541, -73.61417),
            new LatLng(45.46535, -73.61427),
            new LatLng(45.46526, -73.61444),
            new LatLng(45.46502, -73.61487),
            new LatLng(45.46483, -73.61510),
            new LatLng(45.46438, -73.61571),
            new LatLng(45.46433, -73.61577),
            new LatLng(45.46424, -73.61581),
            new LatLng(45.46412, -73.61603),
            new LatLng(45.46398, -73.61627),
            new LatLng(45.46369, -73.61686),
            new LatLng(45.46356, -73.61711),
            new LatLng(45.46346, -73.61731),
            new LatLng(45.46337, -73.61757),
            new LatLng(45.46333, -73.61769),
            new LatLng(45.46330, -73.61779),
            new LatLng(45.46321, -73.61811),
            new LatLng(45.46314, -73.61842),
            new LatLng(45.46308, -73.61869),
            new LatLng(45.46305, -73.61883),
            new LatLng(45.46302, -73.61896),
            new LatLng(45.46296, -73.61924),
            new LatLng(45.46288, -73.61966),
            new LatLng(45.46286, -73.61973),
            new LatLng(45.46285, -73.61982),
            new LatLng(45.46281, -73.61998),
            new LatLng(45.46278, -73.62014),
            new LatLng(45.46265, -73.62081),
            new LatLng(45.46252, -73.62145),
            new LatLng(45.46247, -73.62165),
            new LatLng(45.46245, -73.62177),
            new LatLng(45.46239, -73.62204),
            new LatLng(45.46235, -73.62219),
            new LatLng(45.46233, -73.62226),
            new LatLng(45.46230, -73.62235),
            new LatLng(45.46228, -73.62244),
            new LatLng(45.46223, -73.62257),
            new LatLng(45.46217, -73.62274),
            new LatLng(45.46217, -73.62275),
            new LatLng(45.46212, -73.62287),
            new LatLng(45.46210, -73.62294),
            new LatLng(45.46208, -73.62298),
            new LatLng(45.46205, -73.62306),
            new LatLng(45.46204, -73.62307),
            new LatLng(45.46191, -73.62335),
            new LatLng(45.46188, -73.62341),
            new LatLng(45.46179, -73.62359),
            new LatLng(45.46178, -73.62372),
            new LatLng(45.46178, -73.62374),
            new LatLng(45.46160, -73.62409),
            new LatLng(45.46166, -73.62420),
            new LatLng(45.46169, -73.62424),
            new LatLng(45.46174, -73.62432),
            new LatLng(45.46186, -73.62463),
            new LatLng(45.46192, -73.62476),
            new LatLng(45.46211, -73.62523),
            new LatLng(45.46216, -73.62534),
            new LatLng(45.46222, -73.62546),
            new LatLng(45.46227, -73.62558),
            new LatLng(45.46227, -73.62559),
            new LatLng(45.46231, -73.62567),
            new LatLng(45.46246, -73.62602),
            new LatLng(45.46272, -73.62658),
            new LatLng(45.46286, -73.62691),
            new LatLng(45.46297, -73.62714),
            new LatLng(45.46306, -73.62734),
            new LatLng(45.46342, -73.62813),
            new LatLng(45.46351, -73.62833),
            new LatLng(45.46356, -73.62846),
            new LatLng(45.46366, -73.62868),
            new LatLng(45.46369, -73.62875),
            new LatLng(45.46374, -73.62890),
            new LatLng(45.46369, -73.62899),
            new LatLng(45.46311, -73.63012),
            new LatLng(45.46278, -73.63073),
            new LatLng(45.46271, -73.63086),
            new LatLng(45.46236, -73.63153),
            new LatLng(45.46218, -73.63188),
            new LatLng(45.46190, -73.63238),
            new LatLng(45.46166, -73.63283),
            new LatLng(45.46164, -73.63287),
            new LatLng(45.46142, -73.63331),
            new LatLng(45.46136, -73.63342),
            new LatLng(45.46112, -73.63389),
            new LatLng(45.46093, -73.63425),
            new LatLng(45.46055, -73.63496),
            new LatLng(45.46041, -73.63518),
            new LatLng(45.46002, -73.63599),
            new LatLng(45.45979, -73.63640),
            new LatLng(45.45974, -73.63648),
            new LatLng(45.45968, -73.63658),
            new LatLng(45.45966, -73.63661),
            new LatLng(45.45958, -73.63673),
            new LatLng(45.45926, -73.63712),
            new LatLng(45.45920, -73.63723),
            new LatLng(45.45843, -73.63815)
    ));

    /**
     * Full Loyola → SGW shuttle route extracted from official KML track.
     */
    private static final List<LatLng> SHUTTLE_ROUTE_LOY_TO_SGW = Collections.unmodifiableList(Arrays.asList(
            new LatLng(45.45843, -73.63815),
            new LatLng(45.45837, -73.63822),
            new LatLng(45.45820, -73.63842),
            new LatLng(45.45816, -73.63846),
            new LatLng(45.45781, -73.63887),
            new LatLng(45.45771, -73.63898),
            new LatLng(45.45766, -73.63904),
            new LatLng(45.45744, -73.63929),
            new LatLng(45.45731, -73.63944),
            new LatLng(45.45716, -73.63961),
            new LatLng(45.45703, -73.63976),
            new LatLng(45.45700, -73.63978),
            new LatLng(45.45693, -73.63986),
            new LatLng(45.45679, -73.64001),
            new LatLng(45.45654, -73.64024),
            new LatLng(45.45608, -73.64059),
            new LatLng(45.45589, -73.64073),
            new LatLng(45.45526, -73.64123),
            new LatLng(45.45501, -73.64143),
            new LatLng(45.45485, -73.64097),
            new LatLng(45.45469, -73.64054),
            new LatLng(45.45462, -73.64035),
            new LatLng(45.45457, -73.64022),
            new LatLng(45.45453, -73.64013),
            new LatLng(45.45450, -73.64006),
            new LatLng(45.45447, -73.63998),
            new LatLng(45.45435, -73.63970),
            new LatLng(45.45426, -73.63947),
            new LatLng(45.45398, -73.63861),
            new LatLng(45.45391, -73.63839),
            new LatLng(45.45370, -73.63796),
            new LatLng(45.45350, -73.63753),
            new LatLng(45.45344, -73.63744),
            new LatLng(45.45337, -73.63737),
            new LatLng(45.45355, -73.63678),
            new LatLng(45.45367, -73.63635),
            new LatLng(45.45381, -73.63582),
            new LatLng(45.45390, -73.63550),
            new LatLng(45.45394, -73.63540),
            new LatLng(45.45412, -73.63479),
            new LatLng(45.45414, -73.63473),
            new LatLng(45.45423, -73.63442),
            new LatLng(45.45427, -73.63429),
            new LatLng(45.45436, -73.63405),
            new LatLng(45.45443, -73.63388),
            new LatLng(45.45453, -73.63368),
            new LatLng(45.45464, -73.63350),
            new LatLng(45.45495, -73.63303),
            new LatLng(45.45520, -73.63265),
            new LatLng(45.45527, -73.63258),
            new LatLng(45.45533, -73.63251),
            new LatLng(45.45547, -73.63222),
            new LatLng(45.45550, -73.63214),
            new LatLng(45.45551, -73.63211),
            new LatLng(45.45553, -73.63201),
            new LatLng(45.45553, -73.63192),
            new LatLng(45.45555, -73.63174),
            new LatLng(45.45535, -73.63189),
            new LatLng(45.45502, -73.63216),
            new LatLng(45.45470, -73.63239),
            new LatLng(45.45444, -73.63257),
            new LatLng(45.45402, -73.63284),
            new LatLng(45.45377, -73.63304),
            new LatLng(45.45362, -73.63314),
            new LatLng(45.45342, -73.63329),
            new LatLng(45.45317, -73.63346),
            new LatLng(45.45295, -73.63360),
            new LatLng(45.45277, -73.63371),
            new LatLng(45.45259, -73.63379),
            new LatLng(45.45255, -73.63380),
            new LatLng(45.45248, -73.63382),
            new LatLng(45.45226, -73.63385),
            new LatLng(45.45224, -73.63385),
            new LatLng(45.45220, -73.63385),
            new LatLng(45.45212, -73.63385),
            new LatLng(45.45196, -73.63384),
            new LatLng(45.45187, -73.63382),
            new LatLng(45.45173, -73.63377),
            new LatLng(45.45159, -73.63370),
            new LatLng(45.45155, -73.63366),
            new LatLng(45.45126, -73.63343),
            new LatLng(45.45125, -73.63342),
            new LatLng(45.45121, -73.63338),
            new LatLng(45.45118, -73.63336),
            new LatLng(45.45108, -73.63328),
            new LatLng(45.45099, -73.63320),
            new LatLng(45.45094, -73.63315),
            new LatLng(45.45091, -73.63311),
            new LatLng(45.45080, -73.63299),
            new LatLng(45.45069, -73.63286),
            new LatLng(45.45066, -73.63283),
            new LatLng(45.45063, -73.63280),
            new LatLng(45.45052, -73.63267),
            new LatLng(45.45040, -73.63255),
            new LatLng(45.45012, -73.63224),
            new LatLng(45.44998, -73.63209),
            new LatLng(45.44996, -73.63207),
            new LatLng(45.44982, -73.63191),
            new LatLng(45.44971, -73.63181),
            new LatLng(45.44974, -73.63174),
            new LatLng(45.44977, -73.63164),
            new LatLng(45.44996, -73.63112),
            new LatLng(45.44998, -73.63109),
            new LatLng(45.45003, -73.63096),
            new LatLng(45.45012, -73.63074),
            new LatLng(45.45026, -73.63042),
            new LatLng(45.45051, -73.62990),
            new LatLng(45.45063, -73.62962),
            new LatLng(45.45102, -73.62895),
            new LatLng(45.45109, -73.62886),
            new LatLng(45.45113, -73.62882),
            new LatLng(45.45118, -73.62877),
            new LatLng(45.45133, -73.62853),
            new LatLng(45.45136, -73.62847),
            new LatLng(45.45137, -73.62846),
            new LatLng(45.45149, -73.62827),
            new LatLng(45.45186, -73.62765),
            new LatLng(45.45217, -73.62712),
            new LatLng(45.45252, -73.62641),
            new LatLng(45.45258, -73.62628),
            new LatLng(45.45261, -73.62621),
            new LatLng(45.45268, -73.62606),
            new LatLng(45.45271, -73.62600),
            new LatLng(45.45279, -73.62581),
            new LatLng(45.45283, -73.62572),
            new LatLng(45.45298, -73.62538),
            new LatLng(45.45302, -73.62529),
            new LatLng(45.45303, -73.62528),
            new LatLng(45.45308, -73.62516),
            new LatLng(45.45312, -73.62507),
            new LatLng(45.45322, -73.62485),
            new LatLng(45.45324, -73.62480),
            new LatLng(45.45327, -73.62473),
            new LatLng(45.45331, -73.62463),
            new LatLng(45.45332, -73.62463),
            new LatLng(45.45340, -73.62441),
            new LatLng(45.45349, -73.62419),
            new LatLng(45.45359, -73.62396),
            new LatLng(45.45360, -73.62395),
            new LatLng(45.45369, -73.62376),
            new LatLng(45.45379, -73.62355),
            new LatLng(45.45389, -73.62334),
            new LatLng(45.45390, -73.62333),
            new LatLng(45.45400, -73.62313),
            new LatLng(45.45406, -73.62301),
            new LatLng(45.45443, -73.62231),
            new LatLng(45.45453, -73.62243),
            new LatLng(45.45491, -73.62288),
            new LatLng(45.45513, -73.62319),
            new LatLng(45.45538, -73.62354),
            new LatLng(45.45564, -73.62390),
            new LatLng(45.45590, -73.62426),
            new LatLng(45.45601, -73.62411),
            new LatLng(45.45603, -73.62409),
            new LatLng(45.45606, -73.62405),
            new LatLng(45.45607, -73.62403),
            new LatLng(45.45609, -73.62401),
            new LatLng(45.45618, -73.62388),
            new LatLng(45.45630, -73.62373),
            new LatLng(45.45638, -73.62362),
            new LatLng(45.45641, -73.62358),
            new LatLng(45.45643, -73.62357),
            new LatLng(45.45655, -73.62342),
            new LatLng(45.45665, -73.62330),
            new LatLng(45.45670, -73.62324),
            new LatLng(45.45673, -73.62320),
            new LatLng(45.45677, -73.62316),
            new LatLng(45.45689, -73.62302),
            new LatLng(45.45697, -73.62292),
            new LatLng(45.45697, -73.62291),
            new LatLng(45.45700, -73.62287),
            new LatLng(45.45711, -73.62272),
            new LatLng(45.45722, -73.62257),
            new LatLng(45.45765, -73.62200),
            new LatLng(45.45767, -73.62198),
            new LatLng(45.45783, -73.62191),
            new LatLng(45.45846, -73.62092),
            new LatLng(45.45879, -73.62034),
            new LatLng(45.45891, -73.62014),
            new LatLng(45.45921, -73.61959),
            new LatLng(45.45955, -73.61892),
            new LatLng(45.45956, -73.61891),
            new LatLng(45.45967, -73.61869),
            new LatLng(45.45977, -73.61848),
            new LatLng(45.45978, -73.61846),
            new LatLng(45.46020, -73.61757),
            new LatLng(45.46038, -73.61717),
            new LatLng(45.46056, -73.61677),
            new LatLng(45.46066, -73.61653),
            new LatLng(45.46085, -73.61610),
            new LatLng(45.46087, -73.61604),
            new LatLng(45.46116, -73.61530),
            new LatLng(45.46216, -73.61268),
            new LatLng(45.46216, -73.61267),
            new LatLng(45.46217, -73.61266),
            new LatLng(45.46226, -73.61244),
            new LatLng(45.46226, -73.61243),
            new LatLng(45.46235, -73.61222),
            new LatLng(45.46243, -73.61202),
            new LatLng(45.46252, -73.61181),
            new LatLng(45.46270, -73.61137),
            new LatLng(45.46279, -73.61110),
            new LatLng(45.46295, -73.61072),
            new LatLng(45.46340, -73.60959),
            new LatLng(45.46342, -73.60954),
            new LatLng(45.46351, -73.60932),
            new LatLng(45.46385, -73.60849),
            new LatLng(45.46397, -73.60820),
            new LatLng(45.46440, -73.60718),
            new LatLng(45.46450, -73.60699),
            new LatLng(45.46462, -73.60670),
            new LatLng(45.46472, -73.60648),
            new LatLng(45.46510, -73.60561),
            new LatLng(45.46519, -73.60539),
            new LatLng(45.46521, -73.60535),
            new LatLng(45.46528, -73.60517),
            new LatLng(45.46566, -73.60430),
            new LatLng(45.46595, -73.60364),
            new LatLng(45.46621, -73.60307),
            new LatLng(45.46634, -73.60279),
            new LatLng(45.46645, -73.60258),
            new LatLng(45.46651, -73.60246),
            new LatLng(45.46665, -73.60218),
            new LatLng(45.46683, -73.60186),
            new LatLng(45.46699, -73.60157),
            new LatLng(45.46717, -73.60128),
            new LatLng(45.46726, -73.60113),
            new LatLng(45.46729, -73.60109),
            new LatLng(45.46729, -73.60108),
            new LatLng(45.46730, -73.60107),
            new LatLng(45.46742, -73.60089),
            new LatLng(45.46746, -73.60085),
            new LatLng(45.46755, -73.60072),
            new LatLng(45.46778, -73.60040),
            new LatLng(45.46803, -73.60009),
            new LatLng(45.46806, -73.60005),
            new LatLng(45.46820, -73.59989),
            new LatLng(45.46821, -73.59988),
            new LatLng(45.46830, -73.59978),
            new LatLng(45.46833, -73.59974),
            new LatLng(45.46838, -73.59968),
            new LatLng(45.46847, -73.59959),
            new LatLng(45.46863, -73.59941),
            new LatLng(45.46885, -73.59917),
            new LatLng(45.46917, -73.59886),
            new LatLng(45.46947, -73.59859),
            new LatLng(45.46961, -73.59848),
            new LatLng(45.46974, -73.59838),
            new LatLng(45.47008, -73.59810),
            new LatLng(45.47022, -73.59800),
            new LatLng(45.47034, -73.59792),
            new LatLng(45.47056, -73.59777),
            new LatLng(45.47083, -73.59761),
            new LatLng(45.47114, -73.59742),
            new LatLng(45.47122, -73.59738),
            new LatLng(45.47159, -73.59718),
            new LatLng(45.47291, -73.59663),
            new LatLng(45.47312, -73.59653),
            new LatLng(45.47324, -73.59646),
            new LatLng(45.47359, -73.59631),
            new LatLng(45.47376, -73.59624),
            new LatLng(45.47388, -73.59619),
            new LatLng(45.47449, -73.59591),
            new LatLng(45.47455, -73.59589),
            new LatLng(45.47460, -73.59586),
            new LatLng(45.47475, -73.59578),
            new LatLng(45.47511, -73.59559),
            new LatLng(45.47527, -73.59551),
            new LatLng(45.47551, -73.59540),
            new LatLng(45.47563, -73.59535),
            new LatLng(45.47604, -73.59518),
            new LatLng(45.47646, -73.59500),
            new LatLng(45.47653, -73.59496),
            new LatLng(45.47663, -73.59491),
            new LatLng(45.47676, -73.59483),
            new LatLng(45.47682, -73.59480),
            new LatLng(45.47682, -73.59479),
            new LatLng(45.47697, -73.59470),
            new LatLng(45.47711, -73.59461),
            new LatLng(45.47726, -73.59451),
            new LatLng(45.47735, -73.59444),
            new LatLng(45.47740, -73.59440),
            new LatLng(45.47747, -73.59435),
            new LatLng(45.47754, -73.59430),
            new LatLng(45.47761, -73.59424),
            new LatLng(45.47764, -73.59421),
            new LatLng(45.47775, -73.59412),
            new LatLng(45.47782, -73.59406),
            new LatLng(45.47788, -73.59400),
            new LatLng(45.47795, -73.59394),
            new LatLng(45.47800, -73.59388),
            new LatLng(45.47801, -73.59387),
            new LatLng(45.47808, -73.59381),
            new LatLng(45.47813, -73.59375),
            new LatLng(45.47820, -73.59368),
            new LatLng(45.47827, -73.59360),
            new LatLng(45.47839, -73.59346),
            new LatLng(45.47845, -73.59339),
            new LatLng(45.47851, -73.59332),
            new LatLng(45.47865, -73.59313),
            new LatLng(45.47876, -73.59298),
            new LatLng(45.47890, -73.59277),
            new LatLng(45.47903, -73.59257),
            new LatLng(45.47908, -73.59249),
            new LatLng(45.47931, -73.59212),
            new LatLng(45.47955, -73.59176),
            new LatLng(45.47972, -73.59148),
            new LatLng(45.47979, -73.59137),
            new LatLng(45.48005, -73.59100),
            new LatLng(45.48006, -73.59097),
            new LatLng(45.48021, -73.59076),
            new LatLng(45.48038, -73.59052),
            new LatLng(45.48049, -73.59037),
            new LatLng(45.48054, -73.59029),
            new LatLng(45.48070, -73.59007),
            new LatLng(45.48078, -73.58996),
            new LatLng(45.48083, -73.58989),
            new LatLng(45.48089, -73.58980),
            new LatLng(45.48094, -73.58971),
            new LatLng(45.48101, -73.58961),
            new LatLng(45.48111, -73.58946),
            new LatLng(45.48122, -73.58929),
            new LatLng(45.48138, -73.58904),
            new LatLng(45.48148, -73.58887),
            new LatLng(45.48159, -73.58870),
            new LatLng(45.48164, -73.58861),
            new LatLng(45.48175, -73.58844),
            new LatLng(45.48176, -73.58842),
            new LatLng(45.48185, -73.58828),
            new LatLng(45.48196, -73.58811),
            new LatLng(45.48206, -73.58794),
            new LatLng(45.48212, -73.58785),
            new LatLng(45.48228, -73.58760),
            new LatLng(45.48244, -73.58734),
            new LatLng(45.48254, -73.58717),
            new LatLng(45.48265, -73.58700),
            new LatLng(45.48269, -73.58692),
            new LatLng(45.48281, -73.58674),
            new LatLng(45.48296, -73.58650),
            new LatLng(45.48307, -73.58631),
            new LatLng(45.48318, -73.58614),
            new LatLng(45.48323, -73.58606),
            new LatLng(45.48339, -73.58581),
            new LatLng(45.48350, -73.58563),
            new LatLng(45.48355, -73.58554),
            new LatLng(45.48362, -73.58544),
            new LatLng(45.48372, -73.58526),
            new LatLng(45.48418, -73.58451),
            new LatLng(45.48432, -73.58429),
            new LatLng(45.48446, -73.58408),
            new LatLng(45.48477, -73.58358),
            new LatLng(45.48485, -73.58346),
            new LatLng(45.48495, -73.58331),
            new LatLng(45.48495, -73.58330),
            new LatLng(45.48501, -73.58321),
            new LatLng(45.48507, -73.58311),
            new LatLng(45.48507, -73.58297),
            new LatLng(45.48507, -73.58295),
            new LatLng(45.48507, -73.58294),
            new LatLng(45.48508, -73.58292),
            new LatLng(45.48527, -73.58258),
            new LatLng(45.48538, -73.58239),
            new LatLng(45.48543, -73.58230),
            new LatLng(45.48560, -73.58201),
            new LatLng(45.48567, -73.58189),
            new LatLng(45.48582, -73.58164),
            new LatLng(45.48607, -73.58124),
            new LatLng(45.48615, -73.58113),
            new LatLng(45.48620, -73.58105),
            new LatLng(45.48621, -73.58103),
            new LatLng(45.48623, -73.58099),
            new LatLng(45.48633, -73.58084),
            new LatLng(45.48652, -73.58053),
            new LatLng(45.48667, -73.58028),
            new LatLng(45.48667, -73.58027),
            new LatLng(45.48668, -73.58026),
            new LatLng(45.48669, -73.58025),
            new LatLng(45.48680, -73.58010),
            new LatLng(45.48681, -73.58009),
            new LatLng(45.48690, -73.57998),
            new LatLng(45.48694, -73.57995),
            new LatLng(45.48695, -73.57994),
            new LatLng(45.48698, -73.57992),
            new LatLng(45.48711, -73.57983),
            new LatLng(45.48712, -73.57982),
            new LatLng(45.48714, -73.57981),
            new LatLng(45.48720, -73.57977),
            new LatLng(45.48726, -73.57974),
            new LatLng(45.48728, -73.57973),
            new LatLng(45.48739, -73.57968),
            new LatLng(45.48744, -73.57965),
            new LatLng(45.48745, -73.57965),
            new LatLng(45.48752, -73.57961),
            new LatLng(45.48756, -73.57959),
            new LatLng(45.48761, -73.57956),
            new LatLng(45.48762, -73.57956),
            new LatLng(45.48767, -73.57952),
            new LatLng(45.48771, -73.57949),
            new LatLng(45.48777, -73.57944),
            new LatLng(45.48778, -73.57943),
            new LatLng(45.48781, -73.57940),
            new LatLng(45.48785, -73.57935),
            new LatLng(45.48794, -73.57923),
            new LatLng(45.48804, -73.57909),
            new LatLng(45.48817, -73.57892),
            new LatLng(45.48844, -73.57857),
            new LatLng(45.48857, -73.57840),
            new LatLng(45.48883, -73.57804),
            new LatLng(45.48887, -73.57799),
            new LatLng(45.48896, -73.57787),
            new LatLng(45.48923, -73.57754),
            new LatLng(45.48930, -73.57746),
            new LatLng(45.48931, -73.57746),
            new LatLng(45.48944, -73.57730),
            new LatLng(45.48958, -73.57713),
            new LatLng(45.48965, -73.57707),
            new LatLng(45.48969, -73.57703),
            new LatLng(45.48974, -73.57700),
            new LatLng(45.48979, -73.57696),
            new LatLng(45.48991, -73.57692),
            new LatLng(45.49004, -73.57689),
            new LatLng(45.49009, -73.57688),
            new LatLng(45.49011, -73.57688),
            new LatLng(45.49020, -73.57688),
            new LatLng(45.49028, -73.57689),
            new LatLng(45.49034, -73.57691),
            new LatLng(45.49041, -73.57693),
            new LatLng(45.49047, -73.57696),
            new LatLng(45.49054, -73.57699),
            new LatLng(45.49060, -73.57703),
            new LatLng(45.49066, -73.57707),
            new LatLng(45.49072, -73.57712),
            new LatLng(45.49078, -73.57716),
            new LatLng(45.49082, -73.57720),
            new LatLng(45.49111, -73.57747),
            new LatLng(45.49173, -73.57694),
            new LatLng(45.49221, -73.57646),
            new LatLng(45.49290, -73.57582),
            new LatLng(45.49347, -73.57526),
            new LatLng(45.49380, -73.57495),
            new LatLng(45.49388, -73.57488),
            new LatLng(45.49417, -73.57460),
            new LatLng(45.49451, -73.57428),
            new LatLng(45.49523, -73.57359),
            new LatLng(45.49529, -73.57372),
            new LatLng(45.49547, -73.57406),
            new LatLng(45.49555, -73.57422),
            new LatLng(45.49563, -73.57439),
            new LatLng(45.49603, -73.57524),
            new LatLng(45.49629, -73.57579),
            new LatLng(45.49631, -73.57584),
            new LatLng(45.49648, -73.57619),
            new LatLng(45.49657, -73.57635),
            new LatLng(45.49674, -73.57667),
            new LatLng(45.49682, -73.57684),
            new LatLng(45.49690, -73.57699),
            new LatLng(45.49699, -73.57719),
            new LatLng(45.49742, -73.57811),
            new LatLng(45.49719, -73.57831)
    ));

    /**
     * Returns the shuttle route as a list of LatLng points.
     * Direction is determined by checking whether the start point is closer to SGW or Loyola.
     *
     * @param start the user's starting location
     * @param end   the user's destination
     * @return ordered list of LatLng points representing the shuttle route
     */
    public static List<LatLng> getShuttleRoute(LatLng start, LatLng end) {
        if (start == null) return new ArrayList<>(SHUTTLE_ROUTE_SGW_TO_LOY);

        double distToSgw = distanceBetween(start, SHUTTLE_STOP_SGW);
        double distToLoy = distanceBetween(start, SHUTTLE_STOP_LOY);

        if (distToSgw <= distToLoy) {
            // Starting near SGW → use SGW to Loyola route
            return new ArrayList<>(SHUTTLE_ROUTE_SGW_TO_LOY);
        } else {
            // Starting near Loyola → use dedicated Loyola to SGW route
            return new ArrayList<>(SHUTTLE_ROUTE_LOY_TO_SGW);
        }
    }

    // Concordia Shuttle Timetable URL (Winter schedule)
    private static final String SHUTTLE_TIMETABLE_URL = "https://www.concordia.ca/maps/shuttle-bus.html";
    
    /**
     * Opens the Concordia Shuttle Bus timetable in the default browser
     */
    public static void openTimetable(Context context) {
        try {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(SHUTTLE_TIMETABLE_URL));
            context.startActivity(browserIntent);
        } catch (Exception e) {
            Toast.makeText(context, "Unable to open shuttle timetable", Toast.LENGTH_SHORT).show();
            Log.e("ShuttleHelper", "Error opening shuttle timetable", e);
        }
    }
    
    /**
     * Shows shuttle stop markers on the map
     * @param map The GoogleMap instance to add markers to
     * @param existingMarkers Array containing existing marker references [SGW, Loyola] to remove before adding new ones
     * @return Array containing new marker references [SGW, Loyola]
     */
    public static Marker[] showShuttleStops(GoogleMap map, Marker[] existingMarkers) {
        if (map == null) return new Marker[]{null, null};
        
        // Remove old shuttle markers if they exist
        if (existingMarkers != null) {
            if (existingMarkers[0] != null) existingMarkers[0].remove();
            if (existingMarkers[1] != null) existingMarkers[1].remove();
        }

        // Add shuttle stop markers with distinctive appearance
        Marker sgwMarker = map.addMarker(new MarkerOptions()
                .position(SHUTTLE_STOP_SGW)
                .title("SGW Shuttle Stop")
                .snippet("Tap for shuttle timetable")
                .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));

        Marker loyMarker = map.addMarker(new MarkerOptions()
                .position(SHUTTLE_STOP_LOY)
                .title("Loyola Shuttle Stop")
                .snippet("Tap for shuttle timetable")
                .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
        
        return new Marker[]{sgwMarker, loyMarker};
    }
    
    /**
     * Hides shuttle stop markers from the map
     * @param markers Array containing marker references [SGW, Loyola] to remove
     */
    public static void hideShuttleStops(Marker[] markers) {
        if (markers == null) return;
        
        if (markers[0] != null) {
            markers[0].remove();
            markers[0] = null;
        }
        if (markers[1] != null) {
            markers[1].remove();
            markers[1] = null;
        }
    }
    
    /**
     * Checks if a marker is a shuttle stop marker
     * @param marker The marker to check
     * @return true if the marker is a shuttle stop
     */
    public static boolean isShuttleStopMarker(Marker marker) {
        if (marker == null || marker.getTitle() == null) return false;
        String title = marker.getTitle();
        return title.equals("SGW Shuttle Stop") || title.equals("Loyola Shuttle Stop");
    }

    /**
     * Determines if two locations are on the same Concordia campus.
     * Uses the midpoint between SGW and Loyola as the boundary.
     * @param point1 First location
     * @param point2 Second location
     * @param sgwCoords SGW campus center coordinates
     * @param loyCoords Loyola campus center coordinates
     * @return true if both points are closer to the same campus
     */
    public static boolean isSameCampus(LatLng point1, LatLng point2, LatLng sgwCoords, LatLng loyCoords) {
        if (point1 == null || point2 == null) return false;
        boolean point1AtSGW = distanceBetween(point1, sgwCoords) < distanceBetween(point1, loyCoords);
        boolean point2AtSGW = distanceBetween(point2, sgwCoords) < distanceBetween(point2, loyCoords);
        return point1AtSGW == point2AtSGW;
    }

    /** Simple Euclidean-style distance proxy (no Android SDK required) */
    private static double distanceBetween(LatLng a, LatLng b) {
        double dLat = a.latitude - b.latitude;
        double dLng = a.longitude - b.longitude;
        return Math.sqrt(dLat * dLat + dLng * dLng);
    }

}
